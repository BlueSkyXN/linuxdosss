# LinuxDoHelper ä»£ç è¯„å®¡æŠ¥å‘Š

**è¯„å®¡æ—¥æœŸ**: 2026-01-31  
**é¡¹ç›®ç‰ˆæœ¬**: v8.1  
**è¯„å®¡èŒƒå›´**: å…¨é¡¹ç›®ä»£ç åº“

---

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [é«˜ä¼˜å…ˆçº§é—®é¢˜](#é«˜ä¼˜å…ˆçº§é—®é¢˜)
3. [ä¸­ä¼˜å…ˆçº§é—®é¢˜](#ä¸­ä¼˜å…ˆçº§é—®é¢˜)
4. [ä½ä¼˜å…ˆçº§é—®é¢˜](#ä½ä¼˜å…ˆçº§é—®é¢˜)
5. [ä»£ç é£æ ¼å»ºè®®](#ä»£ç é£æ ¼å»ºè®®)
6. [å®‰å…¨æ€§å»ºè®®](#å®‰å…¨æ€§å»ºè®®)
7. [æ€§èƒ½ä¼˜åŒ–å»ºè®®](#æ€§èƒ½ä¼˜åŒ–å»ºè®®)
8. [æ¶æ„æ”¹è¿›å»ºè®®](#æ¶æ„æ”¹è¿›å»ºè®®)
9. [æ€»ç»“](#æ€»ç»“)

---

## æ¦‚è¿°

æœ¬æŠ¥å‘Šå¯¹ LinuxDoHelper é¡¹ç›®è¿›è¡Œäº†å…¨é¢çš„ä»£ç è¯„å®¡ã€‚è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ª Linux.do è®ºå›è‡ªåŠ¨åŒ–è¾…åŠ©å·¥å…·ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š

| æ–‡ä»¶ | è¡Œæ•° | æè¿° |
|------|------|------|
| `linux_do_gui.py` | ~1414 | ä¸»ç¨‹åºï¼ŒåŒ…å« Bot å’Œ GUI ç±» |
| `build.py` | ~200 | PyInstaller æ‰“åŒ…è„šæœ¬ |
| `create_icon.py` | ~63 | å›¾æ ‡ç”Ÿæˆå·¥å…· |
| `.github/workflows/*` | ~180 | CI/CD å·¥ä½œæµé…ç½® |

**æ•´ä½“è¯„ä»·**: ä»£ç åŠŸèƒ½å®Œæ•´ï¼ŒUI è®¾è®¡åˆç†ï¼Œä½†å­˜åœ¨ä¸€äº›ä»£ç è´¨é‡å’Œèµ„æºç®¡ç†æ–¹é¢çš„é—®é¢˜éœ€è¦æ”¹è¿›ã€‚

---

## é«˜ä¼˜å…ˆçº§é—®é¢˜

### 1. ğŸ”´ æµè§ˆå™¨èµ„æºæ³„æ¼ - ç™»å½•å¤±è´¥åé‡å¯æ—¶

**æ–‡ä»¶**: `linux_do_gui.py`  
**ä½ç½®**: ç¬¬ 1375 è¡Œ, 625 è¡Œ, 666 è¡Œ  
**ä¸¥é‡ç¨‹åº¦**: é«˜

**é—®é¢˜æè¿°**:  
å½“ç™»å½•è¶…æ—¶æˆ–å¤±è´¥æ—¶ï¼Œæµè§ˆå™¨æ•…æ„ä¿æŒæ‰“å¼€çŠ¶æ€ä¾›ç”¨æˆ·æŸ¥çœ‹ï¼ˆç¬¬ 666 è¡Œæ³¨é‡Šï¼š"ä¿ç•™è®©ç”¨æˆ·æŸ¥çœ‹"ï¼‰ã€‚ç„¶è€Œï¼Œå¦‚æœç”¨æˆ·å†æ¬¡ç‚¹å‡»"å¼€å§‹"æŒ‰é’®ï¼Œä¼šåœ¨ç¬¬ 1375 è¡Œåˆ›å»ºæ–°çš„ Bot å®ä¾‹ï¼Œå®Œå…¨æ›¿æ¢æ—§å®ä¾‹ã€‚æ—§ Bot çš„æµè§ˆå™¨ (`s.pg`) æ°¸è¿œä¸ä¼šè¢«å…³é—­ï¼Œå¯¼è‡´å­¤å„¿æµè§ˆå™¨è¿›ç¨‹å ç”¨å†…å­˜ï¼ˆé€šå¸¸ 100-300MBï¼‰å’Œç³»ç»Ÿèµ„æºã€‚

**å½“å‰ä»£ç **:
```python
# ç¬¬ 1375 è¡Œ
s.bot = Bot(s.cfg, s.cats, s._lg, s._update_info, s._update_progress)
```

**å»ºè®®ä¿®å¤**:
```python
# åœ¨åˆ›å»ºæ–° Bot ä¹‹å‰ï¼Œæ˜¾å¼å…³é—­æ—§æµè§ˆå™¨
if s.bot:
    s.bot.close()
s.bot = Bot(s.cfg, s.cats, s._lg, s._update_info, s._update_progress)
```

---

### 2. ğŸ”´ åº”ç”¨å¼‚å¸¸é€€å‡ºæ—¶æµè§ˆå™¨æœªæ¸…ç†

**æ–‡ä»¶**: `linux_do_gui.py`  
**ä½ç½®**: ç¬¬ 1376 è¡Œ  
**ä¸¥é‡ç¨‹åº¦**: é«˜

**é—®é¢˜æè¿°**:  
å·¥ä½œçº¿ç¨‹ä½¿ç”¨ `daemon=True` åˆ›å»ºï¼Œæ„å‘³ç€ä¸»ç¨‹åºé€€å‡ºæ—¶çº¿ç¨‹ä¼šè¢«å¼ºåˆ¶ç»ˆæ­¢ã€‚å¦‚æœç”¨æˆ·åœ¨ Bot è¿è¡Œæ—¶å…³é—­çª—å£ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šåœ¨æ‰§è¡Œ `finally` å—ï¼ˆç¬¬ 663-667 è¡Œï¼‰å…³é—­æµè§ˆå™¨ä¹‹å‰è¢«æ€æ­»ï¼Œå¯¼è‡´æµè§ˆå™¨è¿›ç¨‹å­¤ç«‹ã€‚

è™½ç„¶ `_close()` æ–¹æ³•ï¼ˆç¬¬ 841 è¡Œï¼‰è°ƒç”¨ `s.bot.stop()` è®¾ç½® `s.run = False`ï¼Œä½†å¦‚æœçº¿ç¨‹åœ¨ `time.sleep()` è°ƒç”¨ä¸­é˜»å¡ï¼ˆä»£ç ä¸­æœ‰å¤šå¤„ï¼‰ï¼Œçº¿ç¨‹åœ¨ä¼‘çœ å®Œæˆå‰ä¸ä¼šæ£€æŸ¥ `s.run`ï¼Œæ­¤æ—¶å·²ç»è¢«æ€æ­»ã€‚

**å»ºè®®ä¿®å¤**:
```python
def _close(s):
    """å…³é—­çª—å£"""
    if s.bot:
        s.bot.stop()
        s.bot.close()  # æ˜¾å¼å…³é—­æµè§ˆå™¨
    if s.tray_icon:
        try:
            s.tray_icon.stop()
        except:
            pass
    s.rt.destroy()
```

---

### 3. ğŸ”´ è£¸ except è¯­å¥å¯¼è‡´å¼‚å¸¸åæ²¡

**æ–‡ä»¶**: `linux_do_gui.py`  
**ä½ç½®**: ç¬¬ 30, 216, 244, 683, 848, 1200, 1318, 1351, 1355, 1361 è¡Œ  
**ä¸¥é‡ç¨‹åº¦**: é«˜

**é—®é¢˜æè¿°**:  
ä»£ç ä¸­æœ‰ 11 å¤„ä½¿ç”¨è£¸ `except:` è¯­å¥ï¼Œè¿™ä¼šæ•è·æ‰€æœ‰å¼‚å¸¸åŒ…æ‹¬ `KeyboardInterrupt`ã€`SystemExit` ç­‰ï¼Œå¯¼è‡´ï¼š
- éš¾ä»¥è°ƒè¯•é—®é¢˜
- å¯èƒ½éšè—ä¸¥é‡é”™è¯¯
- è¿å Python æœ€ä½³å®è·µ

**ç¤ºä¾‹**:
```python
# ç¬¬ 30-32 è¡Œ - ä¸è‰¯å®è·µ
except:
    print("pip install DrissionPage")
    sys.exit(1)
```

**å»ºè®®ä¿®å¤**:
```python
except ImportError:
    print("ç¼ºå°‘ä¾èµ–ï¼šDrissionPage\nè¯·è¿è¡Œ: pip install DrissionPage")
    sys.exit(1)
```

---

## ä¸­ä¼˜å…ˆçº§é—®é¢˜

### 4. ğŸŸ¡ éæ ‡å‡†å‘½åçº¦å®š

**æ–‡ä»¶**: `linux_do_gui.py`  
**ä¸¥é‡ç¨‹åº¦**: ä¸­

**é—®é¢˜æè¿°**:  
ä»£ç ä¸­ä½¿ç”¨ `s` ä½œä¸º `self` çš„åˆ«åï¼Œè¿™æ˜¯éæ ‡å‡†çš„ Python å‘½åçº¦å®šï¼Œé™ä½äº†ä»£ç å¯è¯»æ€§ã€‚

**ç¤ºä¾‹**:
```python
class Bot:
    def __init__(s, cfg, cats, lg, update_info=None, update_progress=None):
        s.cfg = cfg
        s.cats = cats
```

**å»ºè®®**:  
ä½¿ç”¨æ ‡å‡†çš„ `self` å‘½åï¼Œæˆ–åœ¨ç±»å¼€å¤´æ·»åŠ æ³¨é‡Šè¯´æ˜è¿™ä¸€çº¦å®šã€‚

---

### 5. ğŸŸ¡ ç¼ºå°‘ç±»å‹æç¤º

**æ–‡ä»¶**: æ‰€æœ‰ Python æ–‡ä»¶  
**ä¸¥é‡ç¨‹åº¦**: ä¸­

**é—®é¢˜æè¿°**:  
æ•´ä¸ªä»£ç åº“ç¼ºå°‘ç±»å‹æç¤ºï¼ˆType Hintsï¼‰ï¼Œè¿™é™ä½äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œ IDE æ”¯æŒã€‚

**å½“å‰ä»£ç **:
```python
def check_login(s, wait_for_login=True, max_wait=600, check_interval=15):
```

**å»ºè®®ä¿®å¤**:
```python
def check_login(self, wait_for_login: bool = True, max_wait: int = 600, check_interval: int = 15) -> bool:
```

---

### 6. ğŸŸ¡ ç¡¬ç¼–ç çš„é­”æ³•æ•°å­—

**æ–‡ä»¶**: `linux_do_gui.py`  
**ä¸¥é‡ç¨‹åº¦**: ä¸­

**é—®é¢˜æè¿°**:  
ä»£ç ä¸­æœ‰å¤šå¤„ç¡¬ç¼–ç çš„æ•°å­—ï¼Œå¦‚çª—å£å°ºå¯¸ã€è¶…æ—¶æ—¶é—´ç­‰ï¼Œåº”è¯¥ä½¿ç”¨å¸¸é‡æˆ–é…ç½®ã€‚

**ç¤ºä¾‹**:
```python
s.rt.geometry("750x850")
s.rt.minsize(750, 750)
max_wait=600
check_interval=15
```

**å»ºè®®**:  
å°†è¿™äº›å€¼æå–ä¸ºå¸¸é‡æˆ–æ·»åŠ åˆ° `CFG` é…ç½®å­—å…¸ä¸­ã€‚

---

### 7. ğŸŸ¡ ç©º except å—ä¸­çš„ pass è¯­å¥

**æ–‡ä»¶**: `linux_do_gui.py`  
**ä½ç½®**: ç¬¬ 217, 249, 684, 849, 1319 è¡Œ  
**ä¸¥é‡ç¨‹åº¦**: ä¸­

**é—®é¢˜æè¿°**:  
å¤šå¤„ä½¿ç”¨ `except: pass` æˆ– `except Exception: pass`ï¼Œé™é»˜å¿½ç•¥å¼‚å¸¸ï¼Œå¯èƒ½éšè—é—®é¢˜ã€‚

**å»ºè®®**:  
è‡³å°‘æ·»åŠ æ—¥å¿—è®°å½•æˆ–æ³¨é‡Šè¯´æ˜ä¸ºä»€ä¹ˆå¯ä»¥å®‰å…¨å¿½ç•¥è¯¥å¼‚å¸¸ã€‚

---

### 8. ğŸŸ¡ ç‰ˆæœ¬å·ä¸ä¸€è‡´

**æ–‡ä»¶**: å¤šä¸ªæ–‡ä»¶  
**ä¸¥é‡ç¨‹åº¦**: ä¸­

**é—®é¢˜æè¿°**:  
ç‰ˆæœ¬å·åœ¨ä¸åŒä½ç½®ä¸ä¸€è‡´ï¼š
- `README.md`: v8.1
- `linux_do_gui.py` æ–‡æ¡£å­—ç¬¦ä¸²: v8.0
- `linux_do_gui.py` GUI æ ‡é¢˜: v8.0
- `build.py`: v8.0

**å»ºè®®**:  
ç»Ÿä¸€ç‰ˆæœ¬å·ï¼Œæœ€å¥½ä½¿ç”¨å•ä¸€æ¥æºï¼ˆå¦‚ `__version__` å˜é‡ï¼‰ã€‚

---

## ä½ä¼˜å…ˆçº§é—®é¢˜

### 9. ğŸŸ¢ ç¼ºå°‘å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²

**æ–‡ä»¶**: `linux_do_gui.py`  
**ä¸¥é‡ç¨‹åº¦**: ä½

**é—®é¢˜æè¿°**:  
è®¸å¤šå‡½æ•°ç¼ºå°‘æˆ–åªæœ‰ç®€å•çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œå¦‚ï¼š
- `_toggle_cat`
- `_update_info`
- `_lg`

**å»ºè®®**:  
æ·»åŠ æè¿°å‚æ•°å’Œè¿”å›å€¼çš„æ–‡æ¡£å­—ç¬¦ä¸²ã€‚

---

### 10. ğŸŸ¢ ä»£ç ç»“æ„å¯ä¼˜åŒ–

**æ–‡ä»¶**: `linux_do_gui.py`  
**ä¸¥é‡ç¨‹åº¦**: ä½

**é—®é¢˜æè¿°**:  
å•ä¸ªæ–‡ä»¶è¶…è¿‡ 1400 è¡Œï¼ŒåŒ…å« Bot é€»è¾‘å’Œ GUI é€»è¾‘ã€‚å»ºè®®æ‹†åˆ†ä¸ºï¼š
- `bot.py` - è‡ªåŠ¨åŒ–é€»è¾‘
- `gui.py` - ç”¨æˆ·ç•Œé¢
- `config.py` - é…ç½®ç®¡ç†
- `main.py` - å…¥å£ç‚¹

---

### 11. ğŸŸ¢ build.py ä¸­çš„é‡å¤ä»£ç 

**æ–‡ä»¶**: `build.py`  
**ä¸¥é‡ç¨‹åº¦**: ä½

**é—®é¢˜æè¿°**:  
`build_windows()`, `build_macos()`, `build_linux()` å‡½æ•°æœ‰å¤§é‡é‡å¤ä»£ç ã€‚

**å»ºè®®**:  
æå–å…±åŒçš„æ‰“åŒ…é€»è¾‘åˆ°ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚

---

## ä»£ç é£æ ¼å»ºè®®

### PEP 8 è¿è§„

1. **è¡Œé•¿åº¦**: éƒ¨åˆ†è¡Œè¶…è¿‡ 79-120 å­—ç¬¦é™åˆ¶
2. **å¯¼å…¥é¡ºåº**: å¤šä¸ªæ¨¡å—åœ¨ä¸€è¡Œ `import sys, os, random, time, json, threading`
3. **ç©ºè¡Œ**: ç±»å®šä¹‰ä¹‹é—´åº”æœ‰ä¸¤ä¸ªç©ºè¡Œ

### å»ºè®®æ”¹è¿›

```python
# å½“å‰ï¼ˆç¬¬ 15 è¡Œï¼‰
import sys, os, random, time, json, threading

# å»ºè®®
import json
import os
import random
import sys
import threading
import time
```

---

## å®‰å…¨æ€§å»ºè®®

### 1. ä»£ç†é…ç½®éªŒè¯

**é—®é¢˜**: ä»£ç†åœ°å€æœªéªŒè¯æ ¼å¼  
**å»ºè®®**: æ·»åŠ ä»£ç†åœ°å€æ ¼å¼éªŒè¯

```python
import re

def validate_proxy(proxy: str) -> bool:
    """éªŒè¯ä»£ç†åœ°å€æ ¼å¼"""
    if not proxy:
        return True  # ç©ºå€¼å…è®¸
    pattern = r'^[\w.-]+:\d{1,5}$'
    return bool(re.match(pattern, proxy))
```

### 2. JavaScript æ³¨å…¥é£é™©

**é—®é¢˜**: `do_reply` å‡½æ•°ä½¿ç”¨ `json.dumps()` å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œè¿™æ˜¯æ­£ç¡®çš„åšæ³•  
**çŠ¶æ€**: âœ… å·²æ­£ç¡®å¤„ç†ï¼ˆç¬¬ 491 è¡Œï¼‰

### 3. æ•æ„Ÿä¿¡æ¯å¤„ç†

**çŠ¶æ€**: âœ… è‰¯å¥½ - ç¨‹åºä¸ä¿å­˜ç”¨æˆ·å¯†ç ï¼Œç™»å½•åœ¨æµè§ˆå™¨ä¸­å®Œæˆ

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å»¶è¿Ÿæ£€æŸ¥ä¼˜åŒ–

**å½“å‰**: ç™»å½•æ£€æŸ¥ä½¿ç”¨å›ºå®šé—´éš” `time.sleep(check_interval)`  
**å»ºè®®**: ä½¿ç”¨æŒ‡æ•°é€€é¿æˆ–äº‹ä»¶é€šçŸ¥æœºåˆ¶

### 2. å‡å°‘ä¸å¿…è¦çš„ DOM æŸ¥è¯¢

**å½“å‰**: å¤šæ¬¡è°ƒç”¨ `s.pg.run_js()` è·å–ç›¸åŒä¿¡æ¯  
**å»ºè®®**: æ‰¹é‡è·å–éœ€è¦çš„æ•°æ®

---

## æ¶æ„æ”¹è¿›å»ºè®®

### 1. é…ç½®ç®¡ç†

å»ºè®®ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆJSON/YAMLï¼‰å­˜å‚¨ç”¨æˆ·è®¾ç½®ï¼š

```python
import json
from pathlib import Path

CONFIG_FILE = Path.home() / '.linuxdohelper' / 'config.json'

def load_config():
    if CONFIG_FILE.exists():
        return json.loads(CONFIG_FILE.read_text())
    return DEFAULT_CONFIG

def save_config(config):
    CONFIG_FILE.parent.mkdir(exist_ok=True)
    CONFIG_FILE.write_text(json.dumps(config, indent=2))
```

### 2. æ—¥å¿—ç³»ç»Ÿ

å»ºè®®ä½¿ç”¨ Python æ ‡å‡†æ—¥å¿—æ¨¡å—ï¼š

```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='[%(asctime)s] %(levelname)s: %(message)s',
    datefmt='%H:%M:%S'
)
logger = logging.getLogger(__name__)
```

### 3. çº¿ç¨‹ç®¡ç†

å»ºè®®ä½¿ç”¨ `concurrent.futures` æˆ– `threading.Event` æ”¹è¿›çº¿ç¨‹æ§åˆ¶ï¼š

```python
from threading import Event

class Bot:
    def __init__(self, ...):
        self._stop_event = Event()
    
    def stop(self):
        self._stop_event.set()
    
    def _random_delay(self, min_sec, max_sec, reason=""):
        delay = random.uniform(min_sec, max_sec)
        # ä½¿ç”¨ Event.wait() æ›¿ä»£ time.sleep()ï¼Œå¯è¢«ä¸­æ–­
        self._stop_event.wait(timeout=delay)
```

---

## æ€»ç»“

### é—®é¢˜ç»Ÿè®¡

| ä¼˜å…ˆçº§ | æ•°é‡ | å»ºè®®å¤„ç†æ—¶é—´ |
|--------|------|--------------|
| ğŸ”´ é«˜ | 3 | ç«‹å³ |
| ğŸŸ¡ ä¸­ | 5 | è¿‘æœŸ |
| ğŸŸ¢ ä½ | 3 | æŒ‰éœ€ |

### ä¼˜å…ˆä¿®å¤å»ºè®®

1. **æœ€ç´§æ€¥**: ä¿®å¤æµè§ˆå™¨èµ„æºæ³„æ¼é—®é¢˜ï¼ˆé—®é¢˜ #1, #2ï¼‰
2. **é‡è¦**: æ”¹è¿›å¼‚å¸¸å¤„ç†ï¼Œé¿å…è£¸ exceptï¼ˆé—®é¢˜ #3ï¼‰
3. **å»ºè®®**: ç»Ÿä¸€ç‰ˆæœ¬å·ï¼Œæ·»åŠ ç±»å‹æç¤º

### ä»£ç è´¨é‡è¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| åŠŸèƒ½å®Œæ•´æ€§ | â­â­â­â­â­ | åŠŸèƒ½ä¸°å¯Œï¼Œç•Œé¢å‹å¥½ |
| ä»£ç å¯è¯»æ€§ | â­â­â­ | å‘½åçº¦å®šéæ ‡å‡†ï¼Œç¼ºå°‘ç±»å‹æç¤º |
| é”™è¯¯å¤„ç† | â­â­ | å¤šå¤„è£¸ exceptï¼Œé™é»˜å¿½ç•¥å¼‚å¸¸ |
| èµ„æºç®¡ç† | â­â­ | å­˜åœ¨æµè§ˆå™¨æ³„æ¼é£é™© |
| å®‰å…¨æ€§ | â­â­â­â­ | JavaScript æ³¨å…¥å·²æ­£ç¡®å¤„ç† |
| å¯ç»´æŠ¤æ€§ | â­â­â­ | å•æ–‡ä»¶è¿‡å¤§ï¼Œå»ºè®®æ‹†åˆ† |

**æ€»ä½“è¯„åˆ†**: â­â­â­ (3/5) - åŠŸèƒ½å®Œå–„ä½†ä»£ç è´¨é‡æœ‰æå‡ç©ºé—´

---

*æœ¬æŠ¥å‘Šç”±ä»£ç è¯„å®¡å·¥å…·è‡ªåŠ¨ç”Ÿæˆï¼Œå»ºè®®ç»“åˆå®é™…æƒ…å†µè¿›è¡Œæ”¹è¿›ã€‚*
